head.ready(function(){function s(){$(".js-date-group").each(function(){var s=$(this).find(".js-date-from input"),e=$(this).find(".js-date-to input");s.length&&s.datepicker({dateFormat:"yy-mm-dd",firstDay:1,changeMonth:!0,changeYear:!0,showOtherMonths:!0,selectOtherMonths:!0,yearRange:"-10:+3",showButtonPanel:!1,onClose:function(s){e.datepicker("option","minDate",s)}}),e.length&&e.datepicker({dateFormat:"yy-mm-dd",firstDay:1,changeMonth:!0,changeYear:!0,showOtherMonths:!0,selectOtherMonths:!0,yearRange:"-10:+3",showButtonPanel:!1,onClose:function(e){s.datepicker("option","maxDate",e)}})})}function e(){$.datepicker.regional.ru={closeText:"Закрыть",prevText:"&#x3c;Пред",nextText:"След&#x3e;",currentText:"Сегодня",monthNames:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1},$.datepicker.setDefaults($.datepicker.regional.ru),$(".js-datepicker").datepicker({dateFormat:"dd MM yy",firstDay:1,changeMonth:!0,changeYear:!0,showOtherMonths:!0,onSelect:function(s){$(".js-datepicker-date").val(s)}})}function t(){$(".js-select-single").multiselect({selectedList:1,noneSelectedText:$(this).attr("data-placeholder"),header:"",multiple:!1,open:function(){$(this).hasClass("has-not-checkbox")&&$(this).multiselect("widget").addClass("has-not-checkbox")},close:function(){}}).on("multiselectclick",function(){$(this).multiselect("widget").find("input").is(":checked")?$(this).next().addClass("has-value").removeClass("has-placeholder"):$(this).next().addClass("has-placeholder").removeClass("has-value")})}function i(){var s=$(".js-fotorama").on("fotorama:ready",function(){$(".js-fotorama").addClass("is-ready")}).fotorama(),e=s.data("fotorama");$(".js-next-slide").on("click",function(){return e.show(">"),!1})}function a(){console.log(j+"-"+$(document).scrollTop()),$(document).scrollTop()>=j?p.addClass("has-fixed-sidebar"):p.removeClass("has-fixed-sidebar")}function n(){if(f.length>0)var s=$(window).height()-g;else var s=$(window).height()-g+m;h.outerHeight()>s?h.addClass("has-scroll").find(".sidebar__in").css({height:s-25}):h.removeClass("has-scroll").find(".sidebar__in").css({height:s-25})}function r(){$(".js-ui-slider-range").each(function(){var s=$(this).find(".js-ui-slider-main"),e=$(this).find(".ui-slider-handle"),t=$(this).find(".js-ui-slider-from"),i=$(this).find(".js-ui-slider-to"),a=+$(this).attr("data-min"),n=+$(this).attr("data-max");e.addClass("js-slider-min"),s.slider({range:!0,min:a,max:n,step:50,values:[a,n],slide:function(s,e){$(this).find(".ui-slider-handle").html("<span></span>"),$(this).find(".ui-slider-range").next().addClass("slider__min"),$(this).find(".ui-slider-range").next().next().addClass("slider__max"),t.text(e.values[0]),i.text(e.values[1])}}),$(this).find(".ui-slider-handle").html("<span></span>"),$(this).find(".ui-slider-range").next().addClass("ui-slider__min"),$(this).find(".ui-slider-range").next().next().addClass("ui-slider__max"),t.text(s.slider("values",0)),i.text(s.slider("values",1))})}function o(){$(".js-ui-slider-age").each(function(){var s=$(this).find(".js-ui-slider-main"),e=$(this).find(".ui-slider-handle"),t=$(this).find(".js-ui-slider-from"),i=$(this).find(".js-ui-slider-to"),a=+$(this).attr("data-min"),n=+$(this).attr("data-max");e.addClass("js-slider-min"),s.slider({range:!0,min:a,max:n,step:1,values:[a,n],slide:function(s,e){$(this).find(".ui-slider-handle").html("<span></span>"),$(this).find(".ui-slider-range").next().addClass("slider__min"),$(this).find(".ui-slider-range").next().next().addClass("slider__max"),t.text(e.values[0]),i.text(e.values[1])}}),$(this).find(".ui-slider-handle").html("<span></span>"),$(this).find(".ui-slider-range").next().addClass("ui-slider__min"),$(this).find(".ui-slider-range").next().next().addClass("ui-slider__max"),t.text(s.slider("values",0)),i.text(s.slider("values",1))})}function d(){$(".js-accordion-title").click(function(){$(this).parent().hasClass("js-one-active")?($(".js-accordion").removeClass("is-active"),$(".js-accordion-list").slideUp("fast"),$(this).parent().toggleClass("is-active"),$(this).parents(".js-accordion").find(".js-accordion-list").slideToggle("fast")):($(this).parent().toggleClass("is-active"),$(this).parents(".js-accordion").find(".js-accordion-list").slideToggle("fast")),$(".js-select-single").multiselect({selectedList:1,noneSelectedText:$(this).attr("data-placeholder"),header:"",multiple:!1})}),$(".js-show-all-accordion").on("click",function(){return $(this).hasClass("is-active")?($(".js-show-all-accordion").removeClass("is-active"),$(".js-accordion-list").slideUp("fast"),$(".js-show-all-accordion").text("ПОКАЗАТЬ ВСЕ ПУНКТЫ")):($(".js-show-all-accordion").addClass("is-active"),$(".js-accordion-list").slideDown("fast"),$(".js-show-all-accordion").text("скрыть все списки")),!1})}$(document).on("click",function(){$(".js-overlay").hide(),$("html").removeClass("has-open-popup"),$(".js-drop").removeClass("is-active"),$(".js-drop-link").removeClass("is-active"),$(".js-drop-list").hide(),$(".js-window").fadeOut(200),$(".js-sidebar-filter").slideUp(200),$(".js-grid").removeClass("has-open-window")}),$(".js-drop-link").on("click",function(s){return $(this).parents(".js-drop").toggleClass("is-active"),$(this).toggleClass("is-active"),$(this).parents(".js-drop").find(".js-drop-list").fadeToggle(200),s.stopPropagation(),!1}),$(".js-popup-link").on("click",function(s){$(".js-overlay").fadeOut(200);var e=$(this).attr("href");return $("html").addClass("has-open-popup"),$("."+e).parent().fadeIn(200),s.stopPropagation(),!1}),$(".js-popup-close").on("click",function(){return $(".js-overlay").fadeOut(200),$("html").removeClass("has-open-popup"),!1}),$(".js-popup").on("click",function(s){s.stopPropagation()}),$(".js-categ").on("click",function(){return $(this).parent().find(".js-categ").removeClass("is-active"),$(this).addClass("is-active"),!1}),$(".js-window-link").on("click",function(s){var e=$(this).offset().left+$(this).outerWidth(),t=$(this).offset().top,i=$(this).attr("href"),a=$("."+i).outerHeight();return $("."+i).css({top:t-a,left:e}),$("."+i).fadeIn(200),s.stopPropagation(),!1}),$(".js-window-close").on("click",function(){return $(this).parents(".js-window").fadeOut(200),!1}),$(".js-window").on("click",function(s){s.stopPropagation()}),s(),e(),$(".js-date-from .fa").on("click",function(){$(this).parent().find(".input").focus()}),$(".js-rating").length>0&&$(".js-rating").each(function(){$(this).raty({width:150,hints:["Отвратительно","Плохо","Неплохо","Очень хорошо","Отлично"],starOff:"img/star.png",starOn:"img/star-act.png",score:function(){return $(this).attr("data-score")}})}),$(".js-rating-small").length>0&&$(".js-rating-small").each(function(){$(this).raty({width:83,hints:["Отвратительно","Плохо","Неплохо","Очень хорошо","Отлично"],starOff:"img/star-s.png",starOn:"img/star-s-act.png",score:function(){return $(this).attr("data-score")}})}),$(".js-rating-read").length>0&&$(".js-rating-read").each(function(){$(this).raty({width:150,readOnly:!0,hints:["Отвратительно","Плохо","Неплохо","Очень хорошо","Отлично"],starOff:"img/star.png",starOn:"img/star-act.png",score:function(){return $(this).attr("data-score")}})}),$(".js-rating-small-read").length>0&&$(".js-rating-small-read").each(function(){$(this).raty({width:83,readOnly:!0,hints:["Отвратительно","Плохо","Неплохо","Очень хорошо","Отлично"],starOff:"img/star-s.png",starOn:"img/star-s-act.png",score:function(){return $(this).attr("data-score")}})}),$(".js-download-btn").on("click",function(){$(this).parents(".js-download").find(".js-download-input").trigger("click")}),$(".js-input-tel").length&&$(".js-input-tel").mask("+999 99 99 99 99"),$(".js-show-extend").on("click",function(){return $(this).parents(".js-comment").find(".js-comment-short").hide(),$(this).parents(".js-comment").find(".js-comment-extend").show(),$(this).parents(".js-comment").find(".js-comment-extend textarea").focus(),!1}),$(".js-hide-extend").on("click",function(){return $(this).parents(".js-comment").find(".js-comment-short").show(),$(this).parents(".js-comment").find(".js-comment-extend").hide(),!1}),$(".textarea textarea").focusin(function(){$(this).parent().addClass("is-focused")}),$(".textarea textarea").focusout(function(){$(this).parent().removeClass("is-focused")}),$(".js-select-multi").multiselect({selectedList:7,noneSelectedText:$(this).attr("data-placeholder"),header:"",open:function(){},close:function(){}}).on("multiselectclick",function(){$(this).multiselect("widget").find("input").is(":checked")?$(this).next().addClass("has-value").removeClass("has-placeholder"):$(this).next().addClass("has-placeholder").removeClass("has-value")}),$(".js-select-age").multiselect({selectedList:1,noneSelectedText:$(this).attr("data-placeholder"),header:"",multiple:!1,open:function(){$(this).multiselect("widget").addClass("is-small")},close:function(){$(this).multiselect("widget").removeClass("is-small")}}).on("multiselectclick",function(){$(this).multiselect("widget").find("input").is(":checked")?$(this).next().addClass("has-value").removeClass("has-placeholder"):$(this).next().addClass("has-placeholder").removeClass("has-value")}),t(),$(".js-textarea textarea").keyup(function(){var s=$(this).parents(".js-textarea").find(".js-char-counter"),e=+s.attr("data-max"),t=$(this).val().length,i=e-t;t>=e?s.addClass("is-limit").text(i):s.removeClass("is-limit").text(i)}),$("body").on("keyup",".js-input input",function(){var s=$(this).parents(".js-input").find(".js-char-counter"),e=+s.attr("data-max"),t=$(this).val().length,i=e-t;t>=e?s.addClass("is-limit").text(i):s.removeClass("is-limit").text(i)}),$(".js-tab").length&&$(".js-tab").tabs({beforeActivate:function(s,e){window.location.hash=e.newPanel.selector},load:function(){i(),e(),$(".js-cycle").cycle(),$("body").find(".js-sortable").sortable({revert:!0,receive:function(){$(this).parent().find(".js-grid-message").hide()}}),$(".js-rating").length>0&&$(".js-rating").each(function(){$(this).raty({width:150,hints:["Отвратительно","Плохо","Неплохо","Очень хорошо","Отлично"],starOff:"img/star.png",starOn:"img/star-act.png",score:function(){return $(this).attr("data-score")}})})}}),$("body").on("click",".js-more-lang",function(){var s=$(this).attr("href");return $("."+s).slideToggle(200),!1}),i(),$(".js-radio-box input").on("change",function(){$(this).is(":checked")&&($(this).parents(".js-radio-box-group").find(".js-radio-box").removeClass("is-checked"),$(this).parents(".js-radio-box").addClass("is-checked"))}),$("body").on("change",".js-check input",function(){var s=$(this).closest(".js-check-group"),e=s.children(".js-check-hidden");$(this).is(":checked")?(e.addClass("is-visible"),$(this).parent().addClass("is-checked")):(e.removeClass("is-visible").addClass("is-hidden"),$(this).parent().removeClass("is-checked"))}),$("body").on("change",".js-check-add input",function(){$(this).is(":checked")?$(this).parents(".js-check-group").addClass("is-active-add"):$(this).parents(".js-check-group").removeClass("is-active-add")}),$(".js-radio input").on("change",function(){{var s=$(this).closest(".js-radio"),e=$(this).parents(".js-radio-group");s.find(".js-radio-hidden")}$(this).is(":checked")&&(e.find(".js-radio").removeClass("is-checked"),s.addClass("is-checked"))}),$("body").on("click",".js-remove-btn",function(){return $(this).parents(".js-removeable").addClass("is-remove-ready"),setTimeout(function(){$(".is-remove-ready").remove()},200),!1}),$("body").on("click",".js-remove-btn",function(){return $(this).parents(".js-grid").find(".js-draggable").length>1||$(this).parents(".js-grid").find(".js-grid-message").show(),!1}),$("body").on("click",".js-add-btn",function(){var s=$(this).attr("data-hidden"),e=$("."+s).html();return $(this).before(e),$(".js-select-single-added").multiselect({selectedList:1,noneSelectedText:$(this).attr("data-placeholder"),header:"",multiple:!1}),!1}),$("body").on("click",".js-show-invite",function(s){return $(".js-invite").removeAttr("hidden"),$(this).addClass("is-disabled"),s.stopPropagation(),!1}),$(".js-show-filter").on("click",function(){return $(".js-sidebar-filter").slideDown(200),!1}),$(".js-sidebar-filter").on("click",function(s){s.stopPropagation()}),$(".js-scroll-btn").on("click",function(){var s=$(this).attr("href"),e=$('[data-el="'+s+'"]'),t=e.offset().top;return $("html, body").animate({scrollTop:t},200),!1}),$("body").on("click",".js-edit-grid",function(s){return $(this).parents(".js-grid").toggleClass("has-open-window"),s.stopPropagation(),!1}),$("body").on("click",".js-remove-grid",function(s){return $(this).parents(".js-grid").addClass("is-remove-ready"),setTimeout(function(){$(".js-grid.is-remove-ready").remove()},200),s.stopPropagation(),!1}),$("body").on("click",".js-grid-window",function(s){s.stopPropagation()}),$("body").find(".js-sortable").sortable({revert:!0,receive:function(){$(this).parent().find(".js-grid-message").hide()}}),$(".js-draggable").draggable({connectToSortable:".js-sortable",helper:"clone",revert:"invalid",start:function(){var s=$(".js-sidebar .sidebar__in").scrollTop();$(".js-sidebar").addClass("disable-scroll"),$(".js-sidebar .sidebar__in").css({marginTop:-s})},stop:function(){$(".js-sidebar").removeClass("disable-scroll"),$(".js-sidebar .sidebar__in").css({marginTop:0})}}),$("body").on("click",".js-grid-save",function(){var s=$(this).parents(".js-grid").find(".js-grid-input").val();return s.length>0&&$(this).parents(".js-grid").removeClass("has-open-window").find(".js-grid-name").text(s),!1}),$("body").on("click",".js-grid-add",function(){var s=$(this).attr("data-hidden"),e=$("."+s).html();return $(this).parents(".js-grid").before(e),$(".js-new-grid .js-sortable").sortable({revert:!0,receive:function(){$(this).parent().find(".js-grid-message").hide(),$(this).parents(".js-new-grid").removeClass(".js-new-grid")}}),!1});var l=$(".header"),c=$(".footer"),h=$(".js-sidebar"),u=$(".js-sidebar").parents(".l-cols"),f=$(".js-filter"),p=$("body"),m=l.outerHeight(),g=c.outerHeight(),j=(h.outerHeight(),f.outerHeight(),u.offset().top);n(),$(".js-show-search").on("click",function(){return $(".js-filter-search").show(),$(".js-filter-result").hide(),!1}),h.length>0&&a(),$(window).scroll(function(){h.length>0&&a()}),$(window).resize(function(){h.length>0&&a()}),r(),o(),$(".js-digits-only").keypress(function(s){return 8!=s.which&&0!=s.which&&(s.which<48||s.which>57)?!1:void 0}),$(".js-select select").on("change",function(){var s=$(this).val();$(this).parent().find(".js-select-text").text(s)}),d()});